<!DOCTYPE html>
<html class="ui-page-login bg-fff">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<!-- <meta name="referrer" content="strict-origin-when-cross-origin" /> -->
	<meta name="referrer" content="no-referrer-when-downgrade"" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black">

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
	<meta http-equiv="x-dns-prefetch-control" content="on"/>
	<meta name="renderer" content="webkit">
	<meta name="keywords" content="客服咨询"/>
	<meta name="description" content="客服咨询"/>
	<meta name="viewport" content="width=320,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,initial-scale=1"/>
	<meta name="referrer" content="always">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="format-detection" content="telephone=no">
	<title>注册</title>
	<link rel="stylesheet" type="text/css" href="css/mui.min.css"/>
	<link rel="stylesheet" type="text/css" href="css/css.css"/> 

</head>

<body class="bg-fff">
	<header class="mui-bar mui-bar-nav">
		<h1 class="mui-title">注册</h1>
	</header>

	<div class="mui-content"> 
		<form class="mui-input-group">
			<div class="mui-input-row">
				<label>用户名</label>
			<input type="text" id="mobile" maxlength="11" class="mui-input-clear" placeholder="请输入用户名">
			</div>
			<div class="mui-input-row">
				<label>密码</label>
				<input type="password" id="password" class="mui-input-password" placeholder="请输入密码">
			</div>
			<div class="mui-button-row">
				<button id="doreg" type="button" class="mui-btn mui-btn-primary" >确认注册</button>
				<button type="button" class="mui-btn mui-btn-danger" onclick="javascript:window.location.href='/login.html'">去登录</button> 
			</div>
		</form> 
	</div>
</body>
<script src="js/jquery.min.js"  type="text/javascript"></script>
<script type="text/javascript">
var User = {
	flag : true,
	init : function() {
		var self = this;
		$('#doreg').click(function(){  
			
			self.register();
		});
	},
	register : function() {
		var self = this; 
		var mobile = $("#mobile").val();
		var password = $("#password").val();
		var realname = "hello"; //$("#realname").val();
		
		if ( password.length < 6)
		{
				self.alert('请输入大于6位的密码');
				return;
		}
		
		if ('' == realname)
		{
				self.alert('请输入姓名');
				return;
		}
		
		if (!self.flag)
		{
			return;
		}
		self.flag = false;
		$.post('/auth/register', {
			mobile : mobile, password : password, nickname : realname 
		}, function(data) {
			self.flag = true;
			if (data.success)
			{
				location.href = "/login.html";
				return false;
			}
			self.alert(data.msg);
		}, 'JSON');
	},
	alert : function(msg) {
		var domsg = $("#domsg"); 
		if (domsg.length < 1)
		{
			domsg = document.createElement("div");
			domsg.id = "domsg";
			domsg.className = "popupWindow";
			var string = '<div class="hint"><div class="text" id="msgtext" style="padding: 20px 0;" >'+ msg +'</div>';
			string += '<div class="btnBox"><a class="btnStyle btn01" id="doconfig" style="width: 100%;" >确定</a>';
			string += '</div></div>';
			domsg.innerHTML = string;           
			document.body.appendChild(domsg);
			
			$("#doconfig").click(function() {
				$("#domsg").css("display","none"); 
			});
		}
		$("#domsg").css("display","block");  
		$("#msgtext").html(msg);
	}
};

User.init();
</script>
</html>
